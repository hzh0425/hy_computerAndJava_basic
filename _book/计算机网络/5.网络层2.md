## 1.IPV6的诞生

### 1.诞生原因

**解决IP地址耗尽问题的措施有以下三种:**

- ①采用无类别编址CIDR，使IP地址的分配更加
  合理;
- ②采用网络地址转换(NAT)方法以节省全球IP地址;
- ③采用具有更大地址空间的新版本的IPv6。

其中前两种方法只是延长了IPv4 地址分配结束的时间,治标不治本，只有第三种方法从根本上`解决了IP地址的耗尽问题`。

### 2.数据格式



![image-20201128100916537](https://gitee.com/zisuu/picture/raw/master/img/20201128100916.png)

![image-20201128100902860](https://gitee.com/zisuu/picture/raw/master/img/20201128100902.png)

**地址格式**

IPv6的128位地址每16位划分为一段，总共8段，每段用冒号隔开，这种表示方法叫做“冒号十六进制表示法”，如下：
fe80:0000:0001:0000:0440:44ff:1233:5678

**压缩格式**

有时候首先格式中的IP地址中有好多0，就可以把连续的一段0压缩为 :: ,即用冒号表示，但是一个IP地址中只能有一个::， 如下：
fe80:0000:0000:0000:0000:0000:0001:0000 —>fe80::0001:0000

**内嵌IPv4地址的IPv6**

在IPv4向IPv6过度的过程中，IPv4的地址会内嵌到IPv6中去，因此在IPv6地址的第一部分使用IPv6的格式（十六进制表示），第二部分使用IPv4的格式（十进制表示）。
如下：
0:0:0:0:0:0:192.168.12.1 或者 ::192.168.12.1
0:0:0:0:0:FFFF:192.168.12.1 或者 ::FFFF:192.168.12.1

### 3.基本地址类型

**IPv6数据报的目的地址可以是以下三种基本类型地址之一.:**

- 1)`单播`。单播就是传统的点对点通信。
- 2)`多播`。多播是一点对多点的通信，分组被交付到一-组计算机的每台计算机。
- 3)`任播`。这是IPv6增加的一-种类型。任播的目的站是-组计算机，但数据报在交付时只交付其中的一台计算机，通常是距离最近的一台计算机。
  ![image-20201128101213777](https://gitee.com/zisuu/picture/raw/master/img/20201128101213.png)



### 4.IPV6与IPV4

#### 1.对比

![image-20201128101348017](https://gitee.com/zisuu/picture/raw/master/img/20201128101348.png)

#### 2.过渡策略

![image-20201128101359579](https://gitee.com/zisuu/picture/raw/master/img/20201128101359.png)

## 2.IP组播

### 1.组播

**IP数据报传输的三种方式**

![image-20201128102936200](https://gitee.com/zisuu/picture/raw/master/img/20201128102936.png)

- 以用户看视频为例，进一步了解单播、广播和多播三种传输方式
- 为了能够支持像视频点播和视频会议这样的多媒体应用，网络必须实施某种有效的组播机制。
- 使用多个单播传送来仿真组播总是可能的，但这会引起主机上大量的处理开销和网络上太多的交通量。
- `人们所需要的组播机制是让源计算机一次发送的单个分组可以抵达用一个组地址标识的若干目标主机，并被它们正确接收`。

![image-20201128103035048](https://gitee.com/zisuu/picture/raw/master/img/20201128103035.png)



### 2.组播地址

![image-20201128103425346](https://gitee.com/zisuu/picture/raw/master/img/20201128103425.png)

### 3.IGMP

#### 1.定义

作用: 让路由器知道本局域网上是否又主机参加或退出了某个组播组

![image-20201128103604854](https://gitee.com/zisuu/picture/raw/master/img/20201128103604.png)

ICMP和IGMP都是使用IP数据包传播报文

#### 2.工作方式

- 某主机要加入组播组时,改主机向组播组的组播地址发送一个IGMP报文,声明自己想要加入该组

  本地组播路由器收到IGMP报文后,要利用**组播路由选择协议**把这组成员关系发送到因特网上的其他组播路由器

![](https://gitee.com/zisuu/picture/raw/master/img/20201128103926.png)

- 本地组播路由器周期性的探寻本地局域网上的主机,以便知道这些主机是否还是该组播组的成员



## 3.移动IP

- 支持移动性的因特网体系结构与协议共称为移动IP,它是为了满足移动结点(计算机、服务、网段等)在移动中保持其连接性而设计的。
- 更确切地说，移动IP技术是指`移动结点以固定的网络IP地址实现跨越不同网段的漫游功能，并保证基于网络IP的网络权限在漫游过程中不发生任何改变。`
- 移动IP的目标是把分组自动地投递给移动结点。一个移动结点是把其连接点从一个网络或子网改变到另-一个网络或子网的主机。
- 使用移动IP，`一个移动结点可以在不改变其IP地址的情况下改变其驻留位置。`

举个列子:

![image-20201128104835666](https://gitee.com/zisuu/picture/raw/master/img/20201128104835.png)

**具体实现:**

![image-20201128104917738](https://gitee.com/zisuu/picture/raw/master/img/20201128104917.png)

![image-20201128104930022](https://gitee.com/zisuu/picture/raw/master/img/20201128104930.png)



## 4.路由器

![image-20201128105130030](https://gitee.com/zisuu/picture/raw/master/img/20201128105130.png)

![image-20201128105206976](https://gitee.com/zisuu/picture/raw/master/img/20201128105207.png)

![image-20201128105224190](https://gitee.com/zisuu/picture/raw/master/img/20201128105224.png)